# フロントエンド固有のコーディングルール

## Svelte 5 設計パターン

### 状態管理
- **$state**: リアクティブな状態
- **$derived**: 派生状態（計算されたプロパティ）
- **$effect**: 副作用処理
- **クラスベースストア**: 複雑な状態管理に使用

### コンポーネント設計
- **props**: `let { prop }: Props = $props()`
- **イベント**: コールバック関数を優先、CustomEventは必要時のみ
- **スニペット**: `Snippet`型を使用した子コンテンツ渡し

## コンポーネント設計原則

- shadcn-svelteコンポーネント（`@src/lib/components/ui`は極力オリジナルを維持する
- 機能別コンポーネントは適切なディレクトリに配置
- 200行を超える場合は機能分割を検討
- メッセージはInlang Paraglideを使用して常に国際化対応
- コンポーネントの単体テスト作成時、外部UIライブラリのモックは使わない。外部UIライブラリ以外はモック化する

## 開発ワークフロー

### フロントエンド（SvelteKit）のコード修正時

手順の過程でエラーが発生した場合、解消後に次工程に進む

1. コード編集
2. vitest単体テストケース作成
3. `bun check` - 型チェック実行
4. `bun run lint` - リンター実行
5. `bun run test [単体テストファイル名]` - vitest単体テスト実行
6. vitest結合テストケース作成
7. `bun run test [結合テストファイル名]` - vitest結合テスト実行
8. `bun run test` - vitest全テスト実行
9. Playwright(E2E)テストケース作成
10. `bun run test:e2e [E2Eテストファイル名]` - E2Eテスト実行（個別ファイルのみで全体は実行しない）
