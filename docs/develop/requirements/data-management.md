# データ管理と同期について

## 概要

アプリケーションのデータ管理方式について説明します。「ファイルの実態の場所」と「同期方法」の2つの要素を組み合わせて構成します。

### 要件

分散システムの考え方で行い、ローカルファーストかつ様々な方法で同期が取れること。

## ファイルの実態の場所

### SQLite（ローカルファイル）
- **対象プラットフォーム**: デスクトップ/モバイル
- **特徴**:
  - 最高セキュリティ
  - オフライン動作可能
  - SQLCipherによる暗号化対応
  - セキュリティが厳しい環境でも利用可能

### IndexedDB（ブラウザ内ストレージ）
- **対象プラットフォーム**: Web
- **特徴**:
  - ブラウザ内でのローカルストレージ
  - SQLiteの代替としてのブラウザ内動作
  - ブラウザ依存のデータ管理

## 同期方法

### 同期なし
- **説明**: ローカルファイルのみで動作
- **特徴**: 最高セキュリティ、オフライン完結
- **アカウント**: 不要

### クラウドストレージ同期
- **説明**: 任意のクラウドストレージサーバーとの同期
- **特徴**:
  - 自前サーバーでの運用が可能
  - 高セキュリティ
  - 差分データ用スキーマによる同期
- **アカウント**: 任意

### Flequit公式サーバー同期
- **説明**: Flequit公式サーバーを使用した同期
- **特徴**:
  - 一般ユーザー向けの標準的な運用
  - 差分データによるサーバー同期
- **アカウント**: 必須

### Git同期
- **説明**: GitおよびGit管理が可能なサービスを使用した同期
- **特徴**:
  - 開発者向け
  - JSONファイル形式での管理
  - プロジェクト/リスト単位でのディレクトリ構成
  - タスク1件につき1つのJSONファイル
  - アクティビティ記録による差分管理
  - プライベートリポジトリによる高セキュリティ
  - クラウドストレージ料金不要
- **アカウント**: 任意

## 組み合わせ可能性マトリックス

| ファイル実態 \ 同期方法 | 同期なし | クラウドストレージ | Flequit公式 | Git同期 |
|-------------------------|----------|-------------------|-------------|---------|
| **SQLite（ローカル）** | ✅ | ✅ | ✅ | ✅ |
| **IndexedDB（ブラウザ）** | ✅ | ❌ | ✅ | ❌ |

## 実装されるモード組み合わせ

### SQLite + 同期なし
- **正式名称**: ローカルファイルモード
- **組み合わせ**: SQLite（ローカル） + 同期なし
- **対象**: デスクトップ/モバイルアプリ
- **アカウント**: 不要

### SQLite + クラウドストレージ同期
- **正式名称**: ローカル+クラウドストレージ同期モード
- **組み合わせ**: SQLite（ローカル） + クラウドストレージ同期
- **対象**: デスクトップ/モバイルアプリ
- **アカウント**: 任意

### SQLite + Flequit公式サーバー同期
- **正式名称**: ローカル+Web同期モード
- **組み合わせ**: SQLite（ローカル） + Flequit公式サーバー同期
- **対象**: デスクトップ/モバイルアプリ
- **アカウント**: 必須

### SQLite + Git同期
- **正式名称**: ローカル+Git同期モード
- **組み合わせ**: SQLite（ローカル） + Git同期
- **対象**: デスクトップ/モバイルアプリ
- **アカウント**: 任意

### IndexedDB + 同期なし
- **正式名称**: WebブラウザーIndexedDBモード
- **組み合わせ**: IndexedDB（ブラウザ） + 同期なし
- **対象**: Webアプリケーション
- **アカウント**: 不要

### IndexedDB + Flequit公式サーバー同期
- **正式名称**: Webサーバー同期モード
- **組み合わせ**: IndexedDB（ブラウザ） + Flequit公式サーバー同期
- **対象**: Webアプリケーション
- **アカウント**: 必須
