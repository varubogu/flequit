# frontend.md

## モードについて

動作モードについてデザインや機能が異なるため、[モードについて](../mode.md)を参照すること

## データ構造について

- プロジェクト
  - リスト
    - タスク
      - サブタスク

## デザイン全体像

※<>で括られたものは該当する変数を表示する

- 画面全体
  - サイドメニュー（画面左側、折りたたみ可能）
    - サイドメニューヘッダー（画面上部）
      - 折りたたみ（ボタン）
      - 検索（テキストボックス）
    - サイドメニューコンテンツ（画面中央）
      - 期限ボタングループ
        - 期限切れ（ボタン）
        - 今日（ボタン）
        - 明日（ボタン）
        - 3日（ボタン）
        - 今週（ボタン）
        - 今月（ボタン）
        - 今期（ボタン）
        - 今年（ボタン）
        - 今年度（ボタン）
    - プロジェクトボタングループ
      - <プロジェクト1>（accordion）
        - <プロジェクト1内のリスト1>（ボタン）
        - <プロジェクト1内のリスト2>（ボタン）
        - <プロジェクト1内のリスト3>（ボタン）
        - <プロジェクト1内のリスト、以下繰り返し>（ボタン）
      - <プロジェクト2>（accordion）
        - <プロジェクト2内のリスト1>（ボタン）
        - <プロジェクト2内のリスト2>（ボタン）
        - <プロジェクト2内のリスト3>（ボタン）
        - <プロジェクト2内のリスト、以下繰り返し>（ボタン）
      - <プロジェクト、以下繰り返し>（accordion）
        - <プロジェクト3内のリスト1>（ボタン）
        - <プロジェクト3内のリスト2>（ボタン）
        - <プロジェクト3内のリスト3>（ボタン）
        - <プロジェクト3内のリスト、以下繰り返し>（ボタン）
    - サイドメニューフッター（画面下部）
      - ヘルプ（ボタン）
      - 設定（ボタン）
      - アカウント（ボタン）
  - タスク一覧
    - タスクを追加（右下固定表示の「+」アイコンボタン）
  - タスク詳細
    - <タスク名>
    - <期限>
    - <優先度>
    - <開始日時>
    - <終了日時>
    - <繰り返し>
    - <繰り返しの間隔>
    - <タスクのノート>

備考：

- タスク一覧、タスク詳細は端末の横幅に応じて両方表示するか片方のみ表示するかを判断する。
- スマホの場合、サイドメニューはハンバーガーメニューとして表示する。

## サイドメニューのデザイン・動作について

- デザインはすべて左寄せとする（折りたたみをするとアイコン＋タイトル→アイコンのみになるような位置とする）
- サイドメニューはすべて<SVGアイコン+名前>の形式で表示する。
- 折りたたみ時にはアイコンのみを表示する。
  - プロジェクトはアイコン未設定が可能。その場合は折りたたみ時にプロジェクト名の先頭2~3文字を表示する。
- 選択中の項目については背景色を変更する。（期限ボタングループ、プロジェクトボタングループ）

### 折りたたみボタン

アイコンのみ表示、クリックするたびにサイドメニューの折りたたみと展開を切り替える

### 検索テキストボックス

検索テキストボックスに入力された内容に応じてタスク一覧を表示する
また、Webの場合はURLも変更する。
入力された内容は以下の条件で検索する

- 検索テキストボックスに入力された内容が「@」で始まる場合、その内容をキーワードとして検索する
  - @が入力された時点で、入力候補を表示する期限の選択、プロジェクト名、リスト名、アカウント名の入力候補を表示し、さらに入力すると条件に部分一致するデータに入力候補が絞り込まれる
  - #が入力された時点で、入力候補を表示するタグの入力候補を表示し、さらに入力すると前方一致の条件でタグ入力候補が絞り込まれる

#### 期限キーワード

- 期限キーワードは「@期限」とする（期限は日本語と英語の両方を対応する）
- 時刻は指定されない限り23:59:59（その日の最終時刻）とする
  - 締め切り日時が過ぎているタスク: @期限切れ、 @deadline
  - 今日が締め切り: @今日、@本日、@today
  - 明日締め切り: @明日、@翌日、@2日、@tomorrow
  - 明後日が締め切り: @明後日、@3日、@3days
  - 7日以内に締め切り: @今週、@週、@weeks
  - 30日以内に締め切り: @今月、@月、@months
  - 期間開始日から90日以内に締め切り: @今期、 @period（※事前に期間開始日を設定しておく必要がある）
  - 365日以内に締め切り: @今年、 @years
  - 年度開始日から365日以内に締め切り: @今年度、 @years（※事前に年度開始日を設定しておく必要がある）
  - 期限キーワードは「@<数値><単位>」とも入力できる（例：@10日、@10days、@2か月、@3month、1Q、@2period、来年度）

#### 時刻以外のキーワード

- プロジェクト名キーワードは「@proj:<プロジェクト名>」または「@project:<プロジェクト名>」とする。（例：@proj:プロジェクト1、@project:プロジェクト2）
- リスト名キーワードは「@list:<リスト名>」とする（例：@list:リスト1、@list:リスト2）
- タスク名キーワードは「@task:<タスク名>」とする（例：@task:タスク1、@task:タスク2）
- ノートキーワードは「@note:<ノート>」とする（例：@note:ノート1、@note:ノート2）
- サブタスク名キーワードは「@subtask:<サブタスク名>」とする
- サブタスクノートキーワードは「@subtasknote:<サブタスクノート>」とする
- アカウントキーワードは「@<アカウント名>」とする

#### タグキーワード

- 検索テキストボックスに入力された内容が「#」で始まる場合、その内容をタグとして検索する
  - タグは「#<タグ名>」とする（例：#タグ1、#タグ2）

#### その他のキーワード

- 上記のいずれにも当てはまらない場合、タスク名、ノート、サブタスク名、サブタスクノートを部分一致で検索する

### 期限ボタングループ

テキストボックスを用意し、プレースホルダーに「🔍️検索」と表示する。
クリックしたボタンの条件に応じて検索テキストボックスに「@今日」「@明日」「@今週」などを入力する
その結果、検索テキストボックスによる絞り込みを行った結果のタスク一覧を表示する
※いずれも時間単位は無視する（「今日」で1日の12時に表示していた場合、1日の23時59分59秒までのタスクを表示する）


| フィルター |              説明              | 検索への反映内容 |
| ---------- | ------------------------------ | ---------------- |
| 期限切れ   | 締め切り日時が過ぎているタスク | @期限切れ        |
| 今日       | 今日締め切り                   | @今日            |
| 明日       | 今日と明日締め切り             | @明日            |
| 3日        | 今日、明日、明後日締め切り     | @3日             |
| 今週       | 7日以内に締め切り              | @今週            |
| 今月       | 30日以内に締め切り             | @今月            |
| 今期       | 90日以内に締め切り             | @今期            |
| 今年       | 365日以内に締め切り            | @今年            |
| 今年度     | 365日以内に締め切り            | @今年度          |

### <プロジェクト名>

プロジェクト自体が選択された場合、検索テキストボックスには「@project:<プロジェクト名>」が入力される。
そのプロジェクト内のタスクリストに該当するすべてのタスクが表示される。
アコーディオンになっていてプロジェクトリストを折りたたみ可能

#### プロジェクト内タスクリストボタン

プロジェクトに紐づくリスト名を表示する。
タスクリストが選択された場合、検索テキストボックスには「@project:<プロジェクト名> @list:<リスト名>」が入力される。
そのリストに該当するタスクが表示される。

### アカウントボタン

ユーザーのアイコンと名前を表示する。
クリックすると下記メニューを表示する。

- ログインしていない場合
  - 設定
  - ヘルプ
  - ログイン
  - ユーザー作成
- ログインしている場合
  - 設定
  - ヘルプ
  - プロフィール
  - ログアウト
