# データ構造の設計について

## 概要

Flequitアプリケーションで使用されるデータ構造の設計について説明します。

## データ構造のグループ

以下のようなグループに分かれています。

- ユーザー設定
- プロジェクト
- ユーザー一覧

### ユーザー設定

保存形式: JSONファイル
ユーザー設定はユーザーの個人設定を管理します。
このデータはローカルに保存され、必要に応じてサーバーと通信して同期、またはクラウドストレージ経由で同期します。

### プロジェクト

保存形式: Automerge、SQLite、PostgreSQL（サーバー上）

プロジェクトに関わるデータを管理します。
このデータはローカルに保存され、必要に応じてサーバーと通信して同期、またはクラウドストレージ経由で同期します。

プログラムからはSQLiteから取得する方針であり、Automergeから直接読み込むのではなく、それをSQLiteに反映するようにします。
これによりAutomergeドキュメントが肥大化してもSQLiteにより最適化されたパフォーマンスが期待できます。

プロジェクトデータについて、
- アプリ上、データベース上: 複数プロジェクトが統合されているため、全てプロジェクトIDをキーとして持つ必要があります。
- Automergeドキュメント: プロジェクトごとに1つのドキュメントがあるため、プロジェクトIDを各テーブルで保存する必要はありません。

### ユーザー一覧

保存形式: Automerge、SQLite

ユーザー一覧はユーザーの一覧を管理します。
このデータはローカルに保存され、必要に応じてサーバーと通信して同期、またはクラウドストレージ経由で同期します。

プログラムからはSQLiteから取得する方針であり、Automergeから直接読み込むのではなく、それをSQLiteに反映するようにします。
これによりAutomergeドキュメントが肥大化してもSQLiteにより最適化されたパフォーマンスが期待できます。
