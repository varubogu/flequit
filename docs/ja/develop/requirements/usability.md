# ユーザビリティ設計書

## 1. キーボード操作

### 1.1 基本方針

- すべての機能をキーボードのみで操作可能
- マウス操作、キーボード操作、タッチ操作にいずれも対応する設計
- 効率的なワークフロー実現
- これらはすべてフロントエンド（Svelte側）で実装すること
- PCやサーバー向けにCLI版も作成する

### 1.2 ショートカットキー

初期設定は以下の通り、ユーザーが自分でカスタマイズできる。

- 基本操作
  - タスク作成: Ctrl+N
  - サブタスク作成: Ctrl+Shift+N
  - タスク編集: Enter
  - タスク削除: Delete, Backspace
  - 検索: Ctrl+F
  - 複製: Ctrl+D
- ナビゲーション
  - タスク間移動: ↑↓
  - サイドバー、タスク一覧、タスク詳細の移動: ←, →, Tabで→、Shift+Tabで← ※ループする
  - プロジェクト切替: Ctrl+P
  - タグ操作: Ctrl+T
  - vimモードもサポートする（hjklで移動）、オプションで設定可能
- カスタマイズ
  - ユーザー定義ショートカット
  - コマンドパレット対応
  - キーバインド設定UI

### 1.3 フォーカス管理

- 視覚的なフォーカス表示
- 論理的なフォーカス順序
- モーダル内フォーカストラップ
- フォーカス位置の保持

## 2. 多言語対応

### 2.1 Paraglide実装

- メッセージ管理
  - 翻訳キーの一元管理
  - 型安全な翻訳
  - メッセージの自動抽出
- サポート言語
  - 日本語（デフォルト）
  - 英語
  - その他言語（需要に応じて追加）

### 2.2 言語切替

- 言語選択UI
  - 設定画面での切替
  - 言語選択の永続化
- 動的コンテンツ
  - ユーザー入力の多言語対応
  - 日時形式の地域化
  - 数値形式の地域化

### 2.3 フォールバック

- 未翻訳テキストの処理
- デフォルト言語への自動切替
- 翻訳漏れの検出

## 3. UI/UXデザイン

### 3.1 視覚的フィードバック

- フォーカス状態の明示
- 操作結果の通知
- エラー表示の工夫
- 進行状況の表示

### 3.2 レイアウト

- 一貫性のある構造
- 論理的な配置
- 適切な余白
- レスポンシブ対応

### 3.3 テキスト表示

- 読みやすいフォント
- 適切なフォントサイズ
- 十分な行間
- テキストコントラスト

### 3.4 データ保護機能

#### 3.4.1 未保存変更の確認

- **対象操作**
  - タスク詳細編集中の別タスク選択
  - サイドメニューでの画面切替
  - ブラウザタブ/ウィンドウを閉じる操作
  - ページ遷移操作

- **確認条件**
  - 編集モードで元データから変更がある場合のみ確認ダイアログを表示
  - 元データと完全一致する場合は確認不要で操作を継続

- **確認ダイアログ**
  - メッセージ: "未保存の変更があります。破棄してもよろしいですか？"
  - 選択肢: "保存して移動" / "破棄して移動" / "キャンセル"
  - キーボード操作: Escapeでキャンセル、Enterで破棄して移動

- **動作仕様**
  - "保存して移動": 現在の変更を保存してから操作を実行
  - "破棄して移動": 変更を破棄して操作を実行
  - "キャンセル": 操作をキャンセルし編集モードを継続

#### 3.4.2 自動保存機能

- 編集中のデータを一時保存（localStorage利用）
- アプリケーション異常終了時の復元機能
- 自動保存間隔の設定可能

## 4. カスタマイズ機能

### 4.1 ユーザー設定

- フォントサイズ調整
- コントラスト調整
- アニメーション制御
- キーボードショートカット設定

### 4.2 テーマ設定

- ライト/ダークモード
- カスタムテーマ
- 色彩設定
